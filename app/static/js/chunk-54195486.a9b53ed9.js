(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54195486"],{"2bb8":function(t,e,r){"use strict";var a=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"===typeof t?o(i(t),(function(i){var s=encodeURIComponent(a(i))+r;return n(t[i])?o(t[i],(function(t){return s+encodeURIComponent(a(t))})).join(e):s+encodeURIComponent(a(t[i]))})).join(e):s?encodeURIComponent(a(s))+r+encodeURIComponent(a(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],a=0;a<t.length;a++)r.push(e(t[a],a));return r}var i=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},"3fe1":function(t,e,r){},"5ee4":function(t,e,r){"use strict";e.decode=e.parse=r("a2d3"),e.encode=e.stringify=r("2bb8")},"9b87":function(t,e,r){"use strict";var a=r("3fe1"),n=r.n(a);n.a},a2d3:function(t,e,r){"use strict";function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!==typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var l=1e3;o&&"number"===typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var p,d,f,m,g=t[u].replace(s,"%20"),h=g.indexOf(r);h>=0?(p=g.substr(0,h),d=g.substr(h+1)):(p=g,d=""),f=decodeURIComponent(p),m=decodeURIComponent(d),a(i,f)?n(i[f])?i[f].push(m):i[f]=[i[f],m]:i[f]=m}return i};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},e6e2:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product"},[r("div",{staticClass:"pro-top"},[r("el-button",{staticClass:"pro-add",attrs:{type:"primary"},on:{click:t.addPro}},[t._v("添加")]),r("el-input",{staticClass:"pro-sousuo",attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),r("el-button",{staticClass:"pro-find",attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1),r("div",{staticClass:"pro-bottom"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.proInfo,stripe:""}},[r("el-table-column",{attrs:{prop:"id",label:"编号",width:"100px",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"产品名称",width:"190px",align:"center"}}),r("el-table-column",{attrs:{prop:"price",label:"价格",width:"150px",align:"center"}}),r("el-table-column",{attrs:{prop:"description",label:"产品描述",width:"210px",align:"center"}}),r("el-table-column",{attrs:{prop:"category.name",label:"所属产品",width:"190px",align:"center"}}),r("el-table-column",{staticClass:"caozuo",attrs:{label:"操作",width:"180px",align:"center",color:"lightblue"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("a",{staticClass:"caozuo deleteById",on:{click:function(r){return t.deleteById(e.row)}}},[t._v("删除")]),t._v(" "),r("a",{staticClass:"caozuo",on:{click:function(r){return t.change(e.row)}}},[t._v("编辑")]),t._v(" "),r("a",{staticClass:"caozuo",on:{click:function(r){return t.details(e.row.id)}}},[t._v("详情")])]}}])})],1)],1),r("div",{staticClass:"pro-footer"},[r("el-pagination",{attrs:{"current-page":t.currentPage1,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1),r("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"myform",attrs:{model:t.form,rules:t.rules}},[r("el-form-item",{attrs:{label:"产品名称","label-width":t.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"价格","label-width":t.formLabelWidth,prop:"price"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n(e))},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"所属栏目","label-width":t.formLabelWidth,prop:"categoryId"}},[r("el-select",{attrs:{placeholder:"请选择所属栏目"},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(t.categoryInfo,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"介绍","label-width":t.formLabelWidth}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[r("el-button",{attrs:{type:"primary"}},[t._v("点击上传")]),r("br"),r("span",{staticStyle:{"font-size":"12px"}},[t._v(" 只能上传jpg/png文件，且不超过500kb")])],1)],1),r("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-50px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.formSave("myform")}}},[t._v("确 定")])],1)],1)],1)},n=[],o=(r("f3dd"),r("0a51"),r("053b"),r("5ee4")),i=r.n(o),s={name:"Product",data:function(){return{input:"",proInfo:[],total:1e3,currentPage1:1,pageSize:6,dialogFormVisible:!1,title:"添加产品信息",categoryInfo:[],form:{name:"",categoryId:"",price:"",desc:""},rules:{name:[{required:!0,message:"请输入产品名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],price:[{required:!0,message:"价格不能为空"},{type:"number",message:"价格必须为数字值"}],categoryId:[{required:!0,message:"请选择所属栏目",trigger:"change"}]},formLabelWidth:"120px"}},computed:{},created:function(){this.findAllCategory(),this.findAll()},methods:{details:function(t){this.$router.push({path:"/details/index",query:{id:t}})},formSave:function(t){var e=this,r=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;r.$axios.post("/product/saveOrUpdate",i.a.stringify(r.form)).then((function(t){200==t.data.status?(e.$message({message:"保存成功",type:"success"}),r.findAll()):e.$message.error("保存失败"),r.dialogFormVisible=!1}))}))},addPro:function(){this.dialogFormVisible=!0,this.title="添加产品信息",this.form={}},change:function(t){this.dialogFormVisible=!0,this.title="编辑产品信息",this.form={id:t.id,name:t.name,price:t.price,categoryId:t.categoryId,desc:t.description}},search:function(){this.input?this.findAll(this.input):this.findAll()},findAllCategory:function(){var t=this;return this.$axios.get("/category/findAll").then((function(e){t.categoryInfo=e.data.data}))},findAll:function(t){var e=this;if(t)var r=this.currentPage1-1,a={page:r,pageSize:this.pageSize,name:t};else r=this.currentPage1-1,a={page:r,pageSize:this.pageSize};this.$axios.post("/product/queryProductCascadeCategory",i.a.stringify(a)).then((function(t){e.proInfo=t.data.data.list,e.total=t.data.data.total}))},handleSizeChange:function(t){},handleCurrentChange:function(t){this.currentPage1=t,this.findAll()},deleteById:function(t){var e=this,r=this;this.$confirm("此操作将永久删除该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.id;r.$axios.get("/product/deleteById",{params:{id:a}}).then((function(t){200==t.data.status?(e.$message({type:"success",message:"删除成功!"}),r.findAll()):e.$message.error(t.data.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},l=s,c=(r("9b87"),r("9ca4")),u=Object(c["a"])(l,a,n,!1,null,"07c21a66",null);e["default"]=u.exports}}]);